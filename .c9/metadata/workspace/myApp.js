{"filter":false,"title":"myApp.js","tooltip":"/myApp.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":17,"column":54},"end":{"row":18,"column":0},"action":"insert","lines":["",""]},{"start":{"row":18,"column":0},"end":{"row":18,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":8},"end":{"row":32,"column":6},"action":"insert","lines":["db.collection('TestCollection').update(","        {","            id:\"123\"","            ","        },","        {","            id:\"123\",","            ip:\"123.123.123.123\",","            date:\"11.04.2015\"","            ","        },","        {","            upsert:true","        }","    );"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":11},"end":{"row":11,"column":53},"action":"remove","lines":["mongodb://localhost:27017/my_database_name"]},{"start":{"row":11,"column":11},"end":{"row":11,"column":69},"action":"insert","lines":["mongodb://RogovS:5mongo@ds049641.mongolab.com:49641/task-5"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":16},"end":{"row":36,"column":17},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":15},"end":{"row":36,"column":16},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":14},"end":{"row":36,"column":15},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":13},"end":{"row":36,"column":14},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":12},"end":{"row":36,"column":13},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":11},"end":{"row":36,"column":12},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":0},"end":{"row":36,"column":11},"action":"remove","lines":["db.close();"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":3},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":8},"end":{"row":18,"column":10},"action":"remove","lines":["db"]},{"start":{"row":18,"column":8},"end":{"row":18,"column":19},"action":"insert","lines":["MongoClient"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":4},"end":{"row":89,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":5},"end":{"row":89,"column":6},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":6},"end":{"row":103,"column":7},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":7},"end":{"row":103,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":3},"end":{"row":35,"column":4},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":4},"end":{"row":35,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":5},"end":{"row":89,"column":6},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":89,"column":4},"end":{"row":89,"column":5},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":7},"end":{"row":103,"column":8},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":6},"end":{"row":103,"column":7},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":87,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":5},"end":{"row":87,"column":6},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":6},"end":{"row":103,"column":7},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":7},"end":{"row":103,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":7},"end":{"row":103,"column":8},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":6},"end":{"row":103,"column":7},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":6},"end":{"row":87,"column":7},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":5},"end":{"row":87,"column":6},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":87,"column":5},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":87,"column":5},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":4},"end":{"row":35,"column":5},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":3},"end":{"row":35,"column":4},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":87,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":5},"end":{"row":87,"column":6},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":6},"end":{"row":103,"column":7},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":7},"end":{"row":103,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":3},"end":{"row":35,"column":4},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":4},"end":{"row":35,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":19,"column":3},"action":"insert","lines":["conn.collection('collectionName').update(","{","   user:\"userToUpdate\"","},","{","   user:\"userToUpdate\",","   someData: \"someNewData\"","},","{","   upsert:true","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"remove","lines":["conn"]},{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":15},"end":{"row":9,"column":29},"action":"remove","lines":["collectionName"]},{"start":{"row":9,"column":15},"end":{"row":9,"column":30},"action":"insert","lines":["TestCollection "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":29},"end":{"row":9,"column":30},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":46},"action":"insert","lines":["console.log('Connection established to', url);"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":39},"end":{"row":9,"column":44},"action":"remove","lines":[", url"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":13},"end":{"row":9,"column":38},"action":"remove","lines":["Connection established to"]},{"start":{"row":9,"column":13},"end":{"row":9,"column":14},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":14},"end":{"row":9,"column":15},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":15},"end":{"row":9,"column":16},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":16},"end":{"row":9,"column":17},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":3},"end":{"row":21,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":0},"end":{"row":21,"column":20},"action":"insert","lines":["console.log('test');"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":0},"end":{"row":62,"column":48},"action":"remove","lines":["server.listen(port, function() {","   console.log('Listening on ' + port);","});"," ","app.get('/', function (request, response) {","   response.sendfile(__dirname + '/index.html');","});","","app.use(express.static(__dirname + '/public'));","","var WebSocketServer = require(\"ws\").Server;","var wss = new WebSocketServer({server: server});"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":36},"end":{"row":5,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":0},"end":{"row":6,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":17,"column":48},"action":"insert","lines":["server.listen(port, function() {","   console.log('Listening on ' + port);","});"," ","app.get('/', function (request, response) {","   response.sendfile(__dirname + '/index.html');","});","","app.use(express.static(__dirname + '/public'));","","var WebSocketServer = require(\"ws\").Server;","var wss = new WebSocketServer({server: server});"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":48},"end":{"row":18,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":0},"end":{"row":100,"column":3},"action":"remove","lines":["wss.on(\"connection\", function(ws) {","  console.log(\"websocket connection open\");","  var msg = {","      type: \"news\",","      data: \"hello world\"","  };","  ws.send(JSON.stringify(msg));"," ","  ws.onmessage = function(d) {","    msg = JSON.parse(d.data);","    console.log(\"websocket messsage received\");","    console.log(msg);","  };","  ","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":0},"end":{"row":33,"column":3},"action":"insert","lines":["wss.on(\"connection\", function(ws) {","  console.log(\"websocket connection open\");","  var msg = {","      type: \"news\",","      data: \"hello world\"","  };","  ws.send(JSON.stringify(msg));"," ","  ws.onmessage = function(d) {","    msg = JSON.parse(d.data);","    console.log(\"websocket messsage received\");","    console.log(msg);","  };","  ","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":3},"end":{"row":41,"column":7},"action":"remove","lines":["user"]},{"start":{"row":41,"column":3},"end":{"row":41,"column":4},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":4},"end":{"row":41,"column":5},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":41,"column":3},"end":{"row":41,"column":5},"action":"remove","lines":["ip"]},{"start":{"row":41,"column":3},"end":{"row":41,"column":5},"action":"insert","lines":["ip"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":3},"end":{"row":44,"column":7},"action":"remove","lines":["user"]},{"start":{"row":44,"column":3},"end":{"row":44,"column":4},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":4},"end":{"row":44,"column":5},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":44,"column":3},"end":{"row":44,"column":5},"action":"remove","lines":["ip"]},{"start":{"row":44,"column":3},"end":{"row":44,"column":5},"action":"insert","lines":["ip"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":3},"end":{"row":45,"column":11},"action":"remove","lines":["someData"]},{"start":{"row":45,"column":3},"end":{"row":45,"column":4},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":4},"end":{"row":45,"column":5},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":3},"end":{"row":45,"column":5},"action":"remove","lines":["da"]},{"start":{"row":45,"column":3},"end":{"row":45,"column":7},"action":"insert","lines":["date"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":1},"end":{"row":49,"column":2},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":2},"end":{"row":50,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":0},"end":{"row":53,"column":1},"action":"insert","lines":["function(err, doc) {","   if (err) { console.log(\"Ошибка соединения!\"); }","   if (doc) { var foundData = doc.someData; }","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":3},"end":{"row":51,"column":4},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":4},"end":{"row":51,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":3},"end":{"row":52,"column":4},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":4},"end":{"row":52,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":1},"end":{"row":53,"column":1},"action":"remove","lines":[",","function(err, doc) {","   //if (err) { console.log(\"Ошибка соединения!\"); }","   //if (doc) { var foundData = doc.someData; }","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":0},"end":{"row":170,"column":5},"action":"remove","lines":["","/*var mongodb = require('mongodb');","var MongoClient = mongodb.MongoClient; ","var url = 'mongodb://RogovS:5mongo@ds049641.mongolab.com:49641/task-5'; ","MongoClient.connect(url, function (err, db) { ","    if (err) { ","        console.log('Unable to connect to the mongoDB server. Error:', err); ","    } ","    else { ","        console.log('Connection established to', url);","        MongoClient.collection('TestCollection').update(","        {","            id:\"123\"","            ","        },","        {","            id:\"123\",","            ip:\"123.123.123.123\",","            date:\"11.04.2015\"","            ","        },","        {","            upsert:true","        }","    );","        db.close(); ","    } ","});*/"," ","","","/*console.log(\"проверка \" + db.collection('TestCollection').findOne({ip:\"123\"}));","","db.collection('TestCollection').update(","        {","            id:\"123\"","            ","        },","        {","            id:\"123\",","            ip:\"123.123.123.123\",","            date:\"11.04.2015\"","            ","        },","        {","            upsert:true","        }","    );*/"," ","","","/////////////////////////////////////////////","","","    /*console.log(\"проверка\");","    ","    db.collection('TestCollection').update(","        {","            id:\"123\"","            ","        },","        {","            id:\"123\",","            ip:\"123.123.123.123\",","            date:\"11.04.2015\"","            ","        },","        {","            upsert:true","        }","    );*/","","","    /*var mongo = require('mongoskin');","    var db = mongo.db('mongodb://RogovS:5mongo@ds049641.mongolab.com:49641/task-5');","    console.log(\"проверка\");*/","    ","    //conn.collection('TestCollection').insert( { ip: 'ip', date: \"someDate\" } );","    ","    /*conn.createCollection(\"test\", function(err, collection){","      collection.insert({\"test\":\"value\"});","    });*/","    ","    //conn.collection.insert();","    ","    /*db.collection('TestCollection').update(","        {","            id:\"123\"","            ","        },","        {","            id:\"123\",","            ip:\"123.123.123.123\",","            date:\"11.04.2015\"","            ","        },","        {","            upsert:true","        }","    );*/","    ","    /*db.collection('TestCollection').update(","    {","       ip1:\"ip1\"","    },","    {","       ip1:\"ip1\",","       date: \"someNewDate\"","    },","    {","       upsert:true","    });*/","","/*conn.collection('TestCollection').findOne( {","   user:\"userToFind\"","},","function(err, doc) {","   if (err) { console.log(\"Ошибка соединения!\"); }","   if (doc) { var foundData = doc.someData; }","});*/"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":1},"end":{"row":26,"column":44},"action":"insert","lines":["console.log(\"websocket messsage received\");"]}]}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":240,"scrollleft":0,"selection":{"start":{"row":26,"column":44},"end":{"row":26,"column":44},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1430304796978,"hash":"b7b1817d514977e0fffcf18e43b9250da01a1e87"}